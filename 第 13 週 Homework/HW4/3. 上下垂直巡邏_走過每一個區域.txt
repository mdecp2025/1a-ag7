import robot
import asyncio

async def main():
    # åˆå§‹åŒ–ä¸–ç•Œç‚º 10x10ï¼Œæ©Ÿå™¨äººå¾ (1, 1) é–‹å§‹
    world, bot = await robot.init(10, 10, 1, 1)
    print("æ©Ÿå™¨äººé–‹å§‹è¡Œå‹•")
    
    # --- å‚ç›´è›‡è¡Œå·¡é‚é‚è¼¯ START ---

    # 1. å°‡æ©Ÿå™¨äººåˆå§‹æ–¹å‘èª¿æ•´ç‚ºã€ŒåŒ— (N)ã€ (å‘ä¸Š)
    # å‡è¨­æ©Ÿå™¨äººåˆå§‹é¢å‘æ± (E)ï¼Œéœ€è¦å·¦è½‰ä¸€æ¬¡ï¼š E -> N
    await bot.turn_left() 

    width = world.width  # 10
    height = world.height # 10

    # å‚ç›´å·¡é‚ (å¾å·¦å´ x=0 åˆ°å³å´ x=9)
    for x in range(width):
        
        # æ±ºå®šç•¶å‰åˆ—çš„æ–¹å‘ (å—æˆ–åŒ—)
        # å¶æ•¸åˆ— (x=0, 2, 4...) å¾€åŒ— (N, å‘ä¸Š)
        if x % 2 == 0:
            target_direction = "N"
            steps = height - 1 # å¾ y=0 åˆ° y=9 éœ€èµ° 9 æ­¥
        # å¥‡æ•¸åˆ— (x=1, 3, 5...) å¾€å— (S, å‘ä¸‹)
        else:
            target_direction = "S"
            steps = height - 1 # å¾ y=9 åˆ° y=0 éœ€èµ° 9 æ­¥

        # 1. èª¿æ•´è‡³å‚ç›´æ–¹å‘
        # è½‰å‘é‚è¼¯ï¼šåˆ©ç”¨ `bot.turn_left()`
        current_facing = bot.facing # å‡è¨­ bot å¯¦ä¾‹æœ‰ facing å±¬æ€§
        
        # è½‰å‘ç›®æ¨™æ–¹å‘ (N æˆ– S)
        # è¨»ï¼šæ­¤è™•éœ€è¦çŸ¥é“ bot.facing çš„æº–ç¢ºå€¼æ‰èƒ½å¯«å‡ºç²¾ç¢ºçš„ turn_left æ¬¡æ•¸ï¼Œ
        #     ä½†æ ¹æ“šå·¡é‚é †åºï¼Œæˆ‘å€‘åªéœ€è¦è€ƒæ…® N/S ä¹‹é–“çš„è½‰æ›ä»¥åŠ N->E æˆ– S->E
        
        # ç”±æ–¼æˆ‘å€‘åœ¨æ›è¡Œæ™‚æœƒç¢ºä¿æ©Ÿå™¨äººé¢å‘æ±æˆ–è¥¿ï¼Œé€™è£¡çš„é‚è¼¯éœ€è¦ç¢ºä¿æ–¹å‘æ­£ç¢ºï¼š
        
        if x == 0:
            # åˆå§‹æ™‚å·²è½‰ç‚º N (å‘ä¸Š)ï¼Œç„¡éœ€å†æ¬¡è½‰å‘ N
            pass 
        elif x > 0:
            # æ›åˆ—å¾Œï¼Œæ©Ÿå™¨äººæ‡‰è©²é¢å‘ E æˆ– W (å¦‚æœå‰›å¾ N æˆ– S ç§»å‹•åˆ° x+1)
            
            # å¦‚æœè¦å¾€åŒ— (N)
            if target_direction == "N":
                # å¾ E è½‰åˆ° Nï¼šå·¦è½‰ 1 æ¬¡
                # å¾ W è½‰åˆ° Nï¼šå·¦è½‰ 3 æ¬¡
                if bot.facing == "E":
                    await bot.turn_left()
                elif bot.facing == "W":
                    for _ in range(3): await bot.turn_left()
                    
            # å¦‚æœè¦å¾€å— (S)
            elif target_direction == "S":
                # å¾ E è½‰åˆ° Sï¼šå·¦è½‰ 3 æ¬¡
                # å¾ W è½‰åˆ° Sï¼šå·¦è½‰ 1 æ¬¡
                if bot.facing == "E":
                    for _ in range(3): await bot.turn_left()
                elif bot.facing == "W":
                    await bot.turn_left()


        # 2. å‚ç›´ç§»å‹•ä¸€æ•´åˆ—
        if steps > 0:
            await bot.walk(steps)
            
        # 3. æ›åˆ—ï¼šå¦‚æœä¸æ˜¯æœ€å¾Œä¸€åˆ— (x < width - 1)
        if x < width - 1:
            # è½‰å‘ 'E' æº–å‚™å‘å³ç§»å‹• 1 æ ¼ (æ›åˆ—)
            if bot.facing == "N":
                # N -> E (å³è½‰): å·¦è½‰ 3 æ¬¡
                for _ in range(3): await bot.turn_left()
            elif bot.facing == "S":
                # S -> E (å·¦è½‰): å·¦è½‰ 1 æ¬¡
                await bot.turn_left()
            
            # å‘å³ç§»å‹• 1 æ ¼ (æ›åˆ—)
            await bot.walk(1)

    # å·¡é‚çµæŸ
    print("ğŸš© å·¡é‚å®Œæˆï¼")
    
    # --- å‚ç›´è›‡è¡Œå·¡é‚é‚è¼¯ END ---

await main()